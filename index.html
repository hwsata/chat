<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Mega Player | 2000+ Tracks | Radio</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700&display=swap');
        
        :root {
            --neon-pink: #ff00ff;
            --neon-blue: #00ffff;
            --neon-purple: #9d00ff;
            --neon-green: #00ff00;
            --dark-bg: #0a0a1a;
        }
        
        body {
            font-family: 'Orbitron', 'Press Start 2P', cursive;
            background-color: var(--dark-bg);
            color: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-image: 
                radial-gradient(circle at 10% 20%, rgba(255, 0, 255, 0.05) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(0, 255, 255, 0.05) 0%, transparent 20%);
            background-attachment: fixed;
            overflow-x: hidden;
        }
        
        .neon-border {
            position: relative;
            border: 3px solid transparent;
            border-radius: 15px;
            background: linear-gradient(var(--dark-bg), var(--dark-bg)) padding-box,
                        linear-gradient(135deg, var(--neon-pink), var(--neon-blue)) border-box;
            box-shadow: 0 0 10px rgba(255, 0, 255, 0.5), 
                        0 0 20px rgba(0, 255, 255, 0.3);
            animation: borderPulse 4s infinite alternate;
        }
        
        .neon-text {
            text-shadow: 0 0 5px var(--neon-pink), 
                         0 0 10px var(--neon-pink),
                         0 0 20px var(--neon-pink);
            color: white;
        }
        
        .neon-btn {
            position: relative;
            background: transparent;
            border: 2px solid var(--neon-blue);
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            overflow: hidden;
            transition: all 0.3s;
            box-shadow: 0 0 10px rgba(0, 255, 255, 0.3);
        }
        
        .neon-btn:hover {
            background: rgba(0, 255, 255, 0.1);
            box-shadow: 0 0 15px var(--neon-blue), 
                        0 0 25px var(--neon-blue);
            transform: translateY(-2px);
        }
        
        .neon-btn:active {
            transform: translateY(0);
        }
        
        .neon-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(0, 255, 255, 0.4), transparent);
            transition: 0.5s;
        }
        
        .neon-btn:hover::before {
            left: 100%;
        }
        
        .logo-container {
            position: relative;
            display: inline-block;
        }
        
        .logo-container::before, .logo-container::after {
            content: '';
            position: absolute;
            top: -5px;
            left: -5px;
            right: -5px;
            bottom: -5px;
            border: 2px solid var(--neon-pink);
            border-radius: 10px;
            animation: neonGlow 2s infinite alternate;
            z-index: -1;
        }
        
        .logo-container::after {
            border-color: var(--neon-blue);
            animation-delay: 0.5s;
        }
        
        .audio-progress {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }
        
        .audio-progress::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 15px;
            height: 15px;
            background: var(--neon-pink);
            border-radius: 50%;
            box-shadow: -407px 0 0 400px var(--neon-pink);
            cursor: pointer;
        }
        
        .cat-container {
            position: relative;
            width: 100px;
            height: 80px;
            margin: 0 auto;
        }
        
        .cat {
            position: absolute;
            width: 60px;
            height: 40px;
            background-color: #ff9900;
            border-radius: 50% 50% 0 0;
            bottom: 0;
            left: 20px;
        }
        
        .cat-ear-left, .cat-ear-right {
            position: absolute;
            width: 0;
            height: 0;
            border-left: 15px solid transparent;
            border-right: 15px solid transparent;
            border-bottom: 20px solid #ff9900;
            top: -15px;
        }
        
        .cat-ear-left {
            left: 0;
            transform: rotate(-30deg);
        }
        
        .cat-ear-right {
            right: 0;
            transform: rotate(30deg);
        }
        
        .cat-eye-left, .cat-eye-right {
            position: absolute;
            width: 8px;
            height: 12px;
            background-color: #333;
            border-radius: 50%;
            top: 15px;
        }
        
        .cat-eye-left {
            left: 15px;
        }
        
        .cat-eye-right {
            right: 15px;
        }
        
        .cat-mouth {
            position: absolute;
            width: 20px;
            height: 10px;
            border-bottom: 2px solid #333;
            border-radius: 0 0 50% 50%;
            bottom: 10px;
            left: 20px;
        }
        
        .bowl {
            position: absolute;
            width: 40px;
            height: 15px;
            background-color: #ccc;
            border-radius: 0 0 50% 50%;
            bottom: 0;
            left: 30px;
        }
        
        .food {
            position: absolute;
            width: 30px;
            height: 5px;
            background-color: #ff6666;
            border-radius: 5px;
            bottom: 5px;
            left: 35px;
            animation: eating 3s infinite;
        }
        
        @keyframes eating {
            0%, 100% { width: 30px; }
            50% { width: 10px; }
        }
        
        @keyframes neonGlow {
            from {
                box-shadow: 0 0 5px var(--neon-pink), 
                            0 0 10px var(--neon-pink),
                            0 0 15px var(--neon-pink);
            }
            to {
                box-shadow: 0 0 10px var(--neon-pink), 
                            0 0 20px var(--neon-pink),
                            0 0 30px var(--neon-pink);
            }
        }
        
        @keyframes borderPulse {
            from {
                box-shadow: 0 0 10px rgba(255, 0, 255, 0.5), 
                            0 0 20px rgba(0, 255, 255, 0.3);
            }
            to {
                box-shadow: 0 0 15px rgba(255, 0, 255, 0.8), 
                            0 0 30px rgba(0, 255, 255, 0.5);
            }
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .floating {
            animation: float 3s ease-in-out infinite;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .equalizer {
            display: flex;
            align-items: flex-end;
            height: 30px;
            gap: 4px;
        }
        
        .equalizer-bar {
            width: 4px;
            background: linear-gradient(to top, #00ffff, #ff00ff);
            border-radius: 3px;
            animation: equalize 1.5s infinite ease-in-out;
        }
        
        .equalizer-bar:nth-child(1) { height: 20%; animation-delay: 0.1s; }
        .equalizer-bar:nth-child(2) { height: 40%; animation-delay: 0.2s; }
        .equalizer-bar:nth-child(3) { height: 60%; animation-delay: 0.3s; }
        .equalizer-bar:nth-child(4) { height: 80%; animation-delay: 0.4s; }
        .equalizer-bar:nth-child(5) { height: 30%; animation-delay: 0.5s; }
        .equalizer-bar:nth-child(6) { height: 70%; animation-delay: 0.6s; }
        .equalizer-bar:nth-child(7) { height: 50%; animation-delay: 0.7s; }
        
        @keyframes equalize {
            0%, 100% { transform: scaleY(1); }
            50% { transform: scaleY(0.4); }
        }
        
        .radio-station {
            transition: all 0.3s;
        }
        
        .radio-station:hover {
            transform: translateX(5px);
            background: rgba(255, 255, 255, 0.05) !important;
        }
        
        .radio-station.active {
            border-left: 4px solid var(--neon-pink);
            background: rgba(255, 255, 255, 0.1) !important;
        }
        
        @media (max-width: 768px) {
            .player-container {
                width: 90% !important;
                padding: 15px !important;
            }
            
            .logo-container img {
                width: 120px !important;
            }
            
            .btn-group {
                flex-direction: column !important;
                gap: 10px !important;
            }
            
            .neon-btn {
                padding: 8px 15px !important;
                font-size: 12px !important;
            }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(var(--neon-pink), var(--neon-blue));
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(var(--neon-purple), var(--neon-green));
        }

        .search-box {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid var(--neon-purple);
            box-shadow: 0 0 10px var(--neon-purple);
            color: white;
        }

        .tabs-btn {
            border-bottom: 2px solid transparent;
            transition: all 0.3s;
        }

        .tabs-btn.active {
            border-bottom: 2px solid var(--neon-blue);
            color: var(--neon-blue);
            text-shadow: 0 0 5px var(--neon-blue);
        }

        .tabs-btn:hover:not(.active) {
            border-bottom: 2px solid var(--neon-purple);
            color: var(--neon-purple);
        }

        .playlist-container {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .radio-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 15px;
        }
        
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .stat-card {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            background: linear-gradient(to right, #ff00ff, #00ffff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
    </style>
</head>
<body class="flex flex-col items-center justify-between p-4">
    <header class="w-full text-center mb-8">
        <div class="logo-container floating">
            <img src="https://via.placeholder.com/200x80?text=NEON+MEGA+PLAYER" alt="Neon Mega Player Logo" class="w-64 h-auto rounded-lg">
        </div>
        <h1 class="neon-text text-2xl md:text-4xl mt-4">NEON MEGA PLAYER - 2000+ TRACKS & RADIO</h1>
    </header>

    <main class="w-full max-w-6xl flex-grow flex flex-col items-center justify-center">
        <!-- Player Section -->
        <div class="player-container neon-border w-full p-8 mb-8 bg-opacity-50 backdrop-blur-sm">
            <div class="flex flex-col items-center">
                <div class="w-40 h-40 md:w-64 md:h-64 mb-6 neon-border overflow-hidden rounded-full">
                    <img id="album-art" src="https://via.placeholder.com/300" alt="Album Art" class="w-full h-full object-cover">
                </div>
                
                <div class="w-full text-center mb-6">
                    <h2 id="song-title" class="neon-text text-xl md:text-2xl mb-1">Unknown Song</h2>
                    <p id="artist-name" class="text-sm md:text-base text-gray-400">Unknown Artist</p>
                    <div id="radio-station" class="hidden">
                        <p id="station-name" class="text-sm md:text-base text-neon-blue"></p>
                        <div id="playing-info" class="flex items-center justify-center gap-2 mt-1">
                            <span class="text-xs">NOW PLAYING:</span>
                            <div class="equalizer">
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                                <div class="equalizer-bar"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="w-full mb-6">
                    <input type="range" id="progress-bar" class="audio-progress w-full" value="0" disabled>
                    <div class="flex justify-between text-xs text-gray-400 mt-1">
                        <span id="current-time">0:00</span>
                        <span id="duration">0:00</span>
                    </div>
                </div>
                
                <div class="btn-group flex gap-4 mb-6">
                    <button class="neon-btn" id="prev-btn"><i class="fas fa-step-backward"></i></button>
                    <button class="neon-btn" id="play-btn"><i class="fas fa-play"></i></button>
                    <button class="neon-btn" id="next-btn"><i class="fas fa-step-forward"></i></button>
                </div>
                
                <div class="w-full flex items-center gap-4">
                    <span class="text-xs"><i class="fas fa-volume-down"></i></span>
                    <input type="range" id="volume-control" class="audio-progress flex-grow" min="0" max="1" step="0.01" value="0.7">
                    <span class="text-xs"><i class="fas fa-volume-up"></i></span>
                </div>
            </div>
        </div>
        
        <!-- Stats Section -->
        <div class="w-full neon-border p-6 mb-8">
            <h3 class="neon-text text-lg mb-4">PLAYER STATS</h3>
            <div class="stats-container">
                <div class="stat-card neon-border">
                    <div class="stat-value" id="total-tracks">2103</div>
                    <div class="text-sm mt-2">TRACKS IN LIBRARY</div>
                </div>
                <div class="stat-card neon-border">
                    <div class="stat-value" id="total-artists">547</div>
                    <div class="text-sm mt-2">UNIQUE ARTISTS</div>
                </div>
                <div class="stat-card neon-border">
                    <div class="stat-value" id="radio-stations">24</div>
                    <div class="text-sm mt-2">RADIO STATIONS</div>
                </div>
                <div class="stat-card neon-border">
                    <div class="stat-value" id="total-genres">12</div>
                    <div class="text-sm mt-2">MUSIC GENRES</div>
                </div>
            </div>
        </div>
        
        <!-- Tabs Navigation -->
        <div class="w-full flex mb-4 gap-2 overflow-x-auto">
            <button class="tabs-btn px-4 py-2 active" data-tab="music">Music Library</button>
            <button class="tabs-btn px-4 py-2" data-tab="radio">Online Radio</button>
            <button class="tabs-btn px-4 py-2" data-tab="favorites">Favorites</button>
            <button class="tabs-btn px-4 py-2" data-tab="playlists">Playlists</button>
        </div>
        
        <!-- Music Library Tab -->
        <div id="music-tab" class="tab-content active w-full max-w-6xl neon-border p-6 mb-8">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                <h3 class="neon-text text-lg">2103 TRACKS COLLECTION</h3>
                <div class="relative w-full md:w-64">
                    <input type="text" id="search-input" placeholder="Search tracks..." 
                        class="search-box w-full px-4 py-2 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <i class="fas fa-search absolute right-3 top-2.5 text-gray-400"></i>
                </div>
            </div>

            <div class="flex mb-4 gap-2 flex-wrap">
                <button class="tabs-btn px-4 py-2 active" data-genre="all">All Genres</button>
                <button class="tabs-btn px-4 py-2" data-genre="electronic">Electronic</button>
                <button class="tabs-btn px-4 py-2" data-genre="rock">Rock</button>
                <button class="tabs-btn px-4 py-2" data-genre="hiphop">Hip-Hop</button>
                <button class="tabs-btn px-4 py-2" data-genre="pop">Pop</button>
                <button class="tabs-btn px-4 py-2" data-genre="jazz">Jazz</button>
                <button class="tabs-btn px-4 py-2" data-genre="classical">Classical</button>
                <button class="tabs-btn px-4 py-2" data-genre="metal">Metal</button>
                <button class="tabs-btn px-4 py-2" data-genre="ambient">Ambient</button>
                <button class="tabs-btn px-4 py-2" data-genre="soundtrack">Soundtrack</button>
            </div>

            <div class="playlist-container">
                <table class="w-full">
                    <thead>
                        <tr class="text-left border-b border-purple-900">
                            <th class="pb-2 w-12">#</th>
                            <th class="pb-2">Title</th>
                            <th class="pb-2">Artist</th>
                            <th class="pb-2">Genre</th>
                            <th class="pb-2 text-right pr-4">Duration</th>
                        </tr>
                    </thead>
                    <tbody id="playlist">
                        <!-- Tracks will be loaded here dynamically -->
                    </tbody>
                </table>
                <div id="loading-more" class="text-center py-4 hidden">
                    <div class="inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-purple-500"></div>
                    <span class="ml-2 text-sm">Loading more tracks...</span>
                </div>
            </div>
        </div>
        
        <!-- Radio Tab -->
        <div id="radio-tab" class="tab-content w-full max-w-6xl neon-border p-6 mb-8">
            <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 gap-4">
                <h3 class="neon-text text-lg">24 ONLINE RADIO STATIONS</h3>
                <div class="relative w-full md:w-64">
                    <input type="text" id="radio-search" placeholder="Search radio..." 
                        class="search-box w-full px-4 py-2 rounded-full focus:outline-none focus:ring-2 focus:ring-purple-500">
                    <i class="fas fa-search absolute right-3 top-2.5 text-gray-400"></i>
                </div>
            </div>
            
            <div class="flex mb-4 gap-2 flex-wrap">
                <button class="tabs-btn px-4 py-2 active" data-radio-genre="all">All Stations</button>
                <button class="tabs-btn px-4 py-2" data-radio-genre="electronic">Electronic</button>
                <button class="tabs-btn px-4 py-2" data-radio-genre="rock">Rock</button>
                <button class="tabs-btn px-4 py-2" data-radio-genre="news">News/Talk</button>
                <button class="tabs-btn px-4 py-2" data-radio-genre="pop">Pop</button>
                <button class="tabs-btn px-4 py-2" data-radio-genre="jazz">Jazz</button>
                <button class="tabs-btn px-4 py-2" data-radio-genre="classical">Classical</button>
                <button class="tabs-btn px-4 py-2" data-radio-genre="world">World</button>
            </div>
            
            <div class="radio-container">
                <!-- Radio stations will be loaded here -->
            </div>
        </div>
        
        <!-- Favorites Tab -->
        <div id="favorites-tab" class="tab-content w-full max-w-6xl neon-border p-6 mb-8">
            <h3 class="neon-text text-lg mb-6">YOUR FAVORITE TRACKS</h3>
            <div id="favorites-list" class="playlist-container">
                <p class="text-center py-8 text-gray-500">You haven't added any favorites yet.</p>
            </div>
        </div>
        
        <!-- Playlists Tab -->
        <div id="playlists-tab" class="tab-content w-full max-w-6xl neon-border p-6 mb-8">
            <div class="flex justify-between items-center mb-6">
                <h3 class="neon-text text-lg">YOUR PLAYLISTS</h3>
                <button class="neon-btn" id="create-playlist">
                    <i class="fas fa-plus mr-2"></i> Create New
                </button>
            </div>
            
            <div id="playlists-grid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <div class="playlist-card neon-border p-4 cursor-pointer hover:bg-purple-900 hover:bg-opacity-30 flex flex-col items-center">
                    <div class="w-32 h-32 bg-purple-900 rounded-lg mb-2 flex items-center justify-center">
                        <i class="fas fa-music text-4xl text-purple-300"></i>
                    </div>
                    <h4 class="text-center">Liked Songs</h4>
                    <p class="text-xs text-gray-500 mt-1">0 tracks</p>
                </div>
                
                <div class="playlist-card neon-border p-4 cursor-pointer hover:bg-purple-900 hover:bg-opacity-30 flex flex-col items-center">
                    <div class="w-32 h-32 bg-gradient-to-br from-purple-900 to-blue-900 rounded-lg mb-2 flex items-center justify-center">
                        <i class="fas fa-headphones text-4xl text-blue-300"></i>
                    </div>
                    <h4 class="text-center">Workout Mix</h4>
                    <p class="text-xs text-gray-500 mt-1">24 tracks</p>
                </div>
                
                <div class="playlist-card neon-border p-4 cursor-pointer hover:bg-purple-900 hover:bg-opacity-30 flex flex-col items-center">
                    <div class="w-32 h-32 bg-gradient-to-br from-blue-900 to-green-900 rounded-lg mb-2 flex items-center justify-center">
                        <i class="fas fa-moon text-4xl text-green-300"></i>
                    </div>
                    <h4 class="text-center">Sleep Sounds</h4>
                    <p class="text-xs text-gray-500 mt-1">18 tracks</p>
                </div>
            </div>
        </div>
    </main>

    <footer class="w-full text-center mt-8 py-4">
        <div class="cat-container mb-4">
            <div class="cat">
                <div class="cat-ear-left"></div>
                <div class="cat-ear-right"></div>
                <div class="cat-eye-left"></div>
                <div class="cat-eye-right"></div>
                <div class="cat-mouth"></div>
            </div>
            <div class="bowl"></div>
            <div class="food"></div>
        </div>
        <p class="text-xs text-gray-500">© 2023 Neon Mega Player - Ultimate Music Experience</p>
    </footer>

    <script>
        // Audio player functionality
        const audio = new Audio();
        const playBtn = document.getElementById('play-btn');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const progressBar = document.getElementById('progress-bar');
        const volumeControl = document.getElementById('volume-control');
        const currentTimeEl = document.getElementById('current-time');
        const durationEl = document.getElementById('duration');
        const songTitleEl = document.getElementById('song-title');
        const artistNameEl = document.getElementById('artist-name');
        const albumArtEl = document.getElementById('album-art');
        const radioStationEl = document.getElementById('radio-station');
        const stationNameEl = document.getElementById('station-name');
        const playlistEl = document.getElementById('playlist');
        const radioContainer = document.querySelector('.radio-container');
        const searchInput = document.getElementById('search-input');
        const radioSearch = document.getElementById('radio-search');
        const loadingMoreEl = document.getElementById('loading-more');
        const tabButtons = document.querySelectorAll('[data-tab]');
        const genreButtons = document.querySelectorAll('[data-genre]');
        const radioGenreButtons = document.querySelectorAll('[data-radio-genre]');
        
        // Real-world popular tracks
        const realTracks = [
            // Electronic (300 tracks)
            {id: 1, title: "Starboy", artist: "The Weeknd, Daft Punk", genre: "electronic", duration: "3:50", cover: "https://upload.wikimedia.org/wikipedia/en/3/39/The_Weeknd_-_Starboy.png"},
            {id: 2, title: "One More Time", artist: "Daft Punk", genre: "electronic", duration: "5:20", cover: "https://upload.wikimedia.org/wikipedia/en/a/ae/Daft_Punk_-_Discovery.jpg"},
            {id: 3, title: "Titanium", artist: "David Guetta ft. Sia", genre: "electronic", duration: "4:05", cover: "https://upload.wikimedia.org/wikipedia/en/8/8e/Titanium_%28David_Guetta_song%29.jpg"},
            {id: 4, title: "Animals", artist: "Martin Garrix", genre: "electronic", duration: "3:11", cover: "https://upload.wikimedia.org/wikipedia/en/e/e1/Martin_Garrix-Animals.jpg"},
            {id: 5, title: "Wake Me Up", artist: "Avicii", genre: "electronic", duration: "4:09", cover: "https://upload.wikimedia.org/wikipedia/en/d/da/Avicii_Wake_Me_Up.jpg"},
            
            // Rock (300 tracks)
            {id: 6, title: "Sweet Child O' Mine", artist: "Guns N' Roses", genre: "rock", duration: "5:56", cover: "https://upload.wikimedia.org/wikipedia/en/3/3c/GunsN_RosesAppetiteforDestructionalbumcover.jpg"},
            {id: 7, title: "Bohemian Rhapsody", artist: "Queen", genre: "rock", duration: "5:55", cover: "https://upload.wikimedia.org/wikipedia/en/e/ef/BoRhap_USSingle.png"},
            {id: 8, title: "Smells Like Teen Spirit", artist: "Nirvana", genre: "rock", duration: "5:01", cover: "https://upload.wikimedia.org/wikipedia/en/b/b7/NirvanaNevermindalbumcover.jpg"},
            {id: 9, title: "Highway to Hell", artist: "AC/DC", genre: "rock", duration: "3:28", cover: "https://upload.wikimedia.org/wikipedia/en/1/1b/Acdc_hth.jpg"},
            {id: 10, title: "Livin' on a Prayer", artist: "Bon Jovi", genre: "rock", duration: "4:11", cover: "https://upload.wikimedia.org/wikipedia/en/6/69/SlipperyWhenWet.jpg"},
            
            // Hip-Hop (300 tracks)
            {id: 11, title: "Sicko Mode", artist: "Travis Scott", genre: "hiphop", duration: "5:12", cover: "https://upload.wikimedia.org/wikipedia/en/5/5d/Travis_Scott_-_Astroworld.png"},
            {id: 12, title: "God's Plan", artist: "Drake", genre: "hiphop", duration: "3:19", cover: "https://upload.wikimedia.org/wikipedia/en/6/63/Drake_-_Scorpion.png"},
            {id: 13, title: "HUMBLE.", artist: "Kendrick Lamar", genre: "hiphop", duration: "2:57", cover: "https://upload.wikimedia.org/wikipedia/en/5/51/Kendrick_Lamar_-_Damn.png"},
            {id: 14, title: "Hotline Bling", artist: "Drake", genre: "hiphop", duration: "4:27", cover: "https://upload.wikimedia.org/wikipedia/en/c/c9/Drake_-_Hotline_Bling.png"},
            {id: 15, title: "Bodak Yellow", artist: "Cardi B", genre: "hiphop", duration: "3:43", cover: "https://upload.wikimedia.org/wikipedia/en/3/36/Cardi_B_-_Bodak_Yellow_%28Official_Single_Cover%29.png"},
            
            // Pop (300 tracks)
            {id: 16, title: "Blank Space", artist: "Taylor Swift", genre: "pop", duration: "3:51", cover: "https://upload.wikimedia.org/wikipedia/en/8/8f/Taylor_Swift_-_Blank_Space.png"},
            {id: 17, title: "Shape of You", artist: "Ed Sheeran", genre: "pop", duration: "3:53", cover: "https://upload.wikimedia.org/wikipedia/en/4/45/Shape_of_You_%28Official_Single_Cover%29_by_Ed_Sheeran.png"},
            {id: 18, title: "Uptown Funk", artist: "Mark Ronson ft. Bruno Mars", genre: "pop", duration: "4:30", cover: "https://upload.wikimedia.org/wikipedia/en/2/2c/Uptown_Funk.png"},
            {id: 19, title: "Happy", artist: "Pharrell Williams", genre: "pop", duration: "3:53", cover: "https://upload.wikimedia.org/wikipedia/en/3/3f/Pharrell_Williams_-_Happy_%28Official_Single_Cover%29.png"},
            {id: 20, title: "Bad Guy", artist: "Billie Eilish", genre: "pop", duration: "3:14", cover: "https://upload.wikimedia.org/wikipedia/en/0/0e/Billie_Eilish_-_Bad_Guy.png"},
            
            // Jazz (200 tracks)
            {id: 21, title: "Take Five", artist: "Dave Brubeck", genre: "jazz", duration: "5:24", cover: "https://upload.wikimedia.org/wikipedia/en/0/02/Takefive.jpg"},
            {id: 22, title: "So What", artist: "Miles Davis", genre: "jazz", duration: "9:22", cover: "https://upload.wikimedia.org/wikipedia/en/9/9c/MilesDavisKindofBlue.jpg"},
            {id: 23, title: "Summertime", artist: "Ella Fitzgerald & Louis Armstrong", genre: "jazz", duration: "4:58", cover: "https://upload.wikimedia.org/wikipedia/en/e/e2/Ella_Fitzgerald_Louis_Armstrong_duet.jpg"},
            {id: 24, title: "Take the 'A' Train", artist: "Duke Ellington", genre: "jazz", duration: "2:56", cover: "https://upload.wikimedia.org/wikipedia/en/7/72/Duke_Ellington_-_Take_the_%22A%22_Train.jpg"},
            {id: 25, title: "Autumn Leaves", artist: "Cannonball Adderley", genre: "jazz", duration: "10:58", cover: "https://upload.wikimedia.org/wikipedia/en/5/5e/Cannonball_adderley_somethin_else.jpg"},
            
            // Classical (200 tracks)
            {id: 26, title: "Symphony No. 5", artist: "Ludwig van Beethoven", genre: "classical", duration: "33:45", cover: "https://upload.wikimedia.org/wikipedia/commons/6/6f/Beethoven.jpg"},
            {id: 27, title: "Moonlight Sonata", artist: "Ludwig van Beethoven", genre: "classical", duration: "15:00", cover: "https://upload.wikimedia.org/wikipedia/commons/6/6f/Beethoven.jpg"},
            {id: 28, title: "The Four Seasons: Spring", artist: "Antonio Vivaldi", genre: "classical", duration: "10:18", cover: "https://upload.wikimedia.org/wikipedia/commons/6/6c/Antonio_Vivaldi.jpg"},
            {id: 29, title: "Eine kleine Nachtmusik", artist: "Wolfgang Amadeus Mozart", genre: "classical", duration: "15:48", cover: "https://upload.wikimedia.org/wikipedia/commons/1/1e/Wolfgang-amadeus-mozart_1.jpg"},
            {id: 30, title: "Canon in D", artist: "Johann Pachelbel", genre: "classical", duration: "5:04", cover: "https://upload.wikimedia.org/wikipedia/commons/3/3e/Pachelbel.jpg"},
            
            // Metal (150 tracks)
            {id: 31, title: "Enter Sandman", artist: "Metallica", genre: "metal", duration: "5:31", cover: "https://upload.wikimedia.org/wikipedia/en/2/2c/Metallica_-_Metallica_cover.jpg"},
            {id: 32, title: "Paranoid", artist: "Black Sabbath", genre: "metal", duration: "2:48", cover: "https://upload.wikimedia.org/wikipedia/en/6/64/Black_Sabbath_-_Paranoid.jpg"},
            {id: 33, title: "Chop Suey!", artist: "System of a Down", genre: "metal", duration: "3:30", cover: "https://upload.wikimedia.org/wikipedia/en/6/6a/System_of_a_Down_-_Toxicity_cover.png"},
            {id: 34, title: "Run to the Hills", artist: "Iron Maiden", genre: "metal", duration: "3:53", cover: "https://upload.wikimedia.org/wikipedia/en/8/8a/Iron_Maiden_-_The_Number_of_the_Beast.jpg"},
            {id: 35, title: "Ace of Spades", artist: "Motörhead", genre: "metal", duration: "2:49", cover: "https://upload.wikimedia.org/wikipedia/en/3/3d/Motorhead_Ace_of_Spades.jpg"},
            
            // Ambient (150 tracks)
            {id: 36, title: "Submers", artist: "Loscil", genre: "ambient", duration: "8:48", cover: "https://upload.wikimedia.org/wikipedia/en/3/3b/Submers.jpg"},
            {id: 37, title: "Selected Ambient Works 85-92", artist: "Aphex Twin", genre: "ambient", duration: "74:40", cover: "https://upload.wikimedia.org/wikipedia/en/5/5d/Aphex_Twin-Selected_Ambient_Works_85-92.jpg"},
            {id: 38, title: "Music for Airports", artist: "Brian Eno", genre: "ambient", duration: "48:37", cover: "https://upload.wikimedia.org/wikipedia/en/2/20/Music_for_Airports_cover.jpg"},
            {id: 39, title: "The Pearl", artist: "Harold Budd & Brian Eno", genre: "ambient", duration: "42:03", cover: "https://upload.wikimedia.org/wikipedia/en/6/6b/Harold_Budd_%26_Brian_Eno_The_Pearl_cover.jpg"},
            {id: 40, title: "Biosphere", artist: "Substrata", genre: "ambient", duration: "66:17", cover: "https://upload.wikimedia.org/wikipedia/en/0/01/Biosphere_-_Substrata.jpg"},
            
            // Soundtrack (200 tracks)
            {id: 41, title: "Main Theme", artist: "John Williams (Star Wars)", genre: "soundtrack", duration: "5:20", cover: "https://upload.wikimedia.org/wikipedia/en/8/87/StarWarsMoviePoster1977.jpg"},
            {id: 42, title: "Time", artist: "Hans Zimmer (Inception)", genre: "soundtrack", duration: "4:35", cover: "https://upload.wikimedia.org/wikipedia/en/2/2e/Inception_%282010%29_theatrical_poster.jpg"},
            {id: 43, title: "Hedwig's Theme", artist: "John Williams (Harry Potter)", genre: "soundtrack", duration: "5:09", cover: "https://upload.wikimedia.org/wikipedia/en/3/3c/Harry_Potter_and_the_Philosopher%27s_Stone_%28film%29.jpg"},
            {id: 44, title: "The Imperial March", artist: "John Williams (Star Wars)", genre: "soundtrack", duration: "3:04", cover: "https://upload.wikimedia.org/wikipedia/en/3/32/Star_Wars_-_The_Empire_Strikes_Back_%281980_film%29.jpg"},
            {id: 45, title: "Main Titles", artist: "Hans Zimmer (The Dark Knight)", genre: "soundtrack", duration: "2:29", cover: "https://upload.wikimedia.org/wikipedia/en/8/8a/Dark_Knight.jpg"},
            
            // Add more tracks to reach ~2000
            // Each of these would be expanded with more tracks from the respective genres
            // For the demo, we'll generate the rest programmatically
        ];

        // Generate more tracks to reach 2000 while maintaining the correct genre distribution
        function generateMoreTracks(baseTracks) {
            const genres = [
                { name: "electronic", count: 300 - 5, artists: ["Daft Punk", "The Chemical Brothers", "Justice", "The Prodigy", "Underworld", "Aphex Twin", "Deadmau5", "Skrillex", "Calvin Harris", "Swedish House Mafia"] },
                { name: "rock", count: 300 - 5, artists: ["Led Zeppelin", "The Rolling Stones", "Pink Floyd", "The Beatles", "The Who", "Deep Purple", "Queen", "AC/DC", "Nirvana", "Pearl Jam"] },
                { name: "hiphop", count: 300 - 5, artists: ["Kanye West", "Jay-Z", "Eminem", "Nas", "OutKast", "Public Enemy", "Wu-Tang Clan", "A Tribe Called Quest", "Notorious B.I.G.", "2Pac"] },
                { name: "pop", count: 300 - 5, artists: ["Michael Jackson", "Madonna", "Prince", "Whitney Houston", "Mariah Carey", "Beyoncé", "Lady Gaga", "Rihanna", "Bruno Mars", "Justin Timberlake"] },
                { name: "jazz", count: 200 - 5, artists: ["John Coltrane", "Miles Davis", "Duke Ellington", "Charles Mingus", "Thelonious Monk", "Herbie Hancock", "Dave Brubeck", "Count Basie", "Billie Holiday", "Ella Fitzgerald"] },
                { name: "classical", count: 200 - 5, artists: ["Johann Sebastian Bach", "Wolfgang Amadeus Mozart", "Ludwig van Beethoven", "Frédéric Chopin", "Pyotr Ilyich Tchaikovsky", "Johannes Brahms", "Franz Schubert", "Claude Debussy", "Igor Stravinsky", "Antonio Vivaldi"] },
                { name: "metal", count: 150 - 5, artists: ["Metallica", "Megadeth", "Slayer", "Anthrax", "Slipknot", "Pantera", "Tool", "Mastodon", "Gojira", "Lamb of God"] },
                { name: "ambient", count: 150 - 5, artists: ["Brian Eno", "Aphex Twin", "The Orb", "Global Communication", "Biosphere", "Loscil", "Steve Roach", "William Basinski", "Stars of the Lid", "Carbon Based Lifeforms"] },
                { name: "soundtrack", count: 200 - 5, artists: ["John Williams", "Hans Zimmer", "Ennio Morricone", "Danny Elfman", "Howard Shore", "James Horner", "Thomas Newman", "Alexandre Desplat", "Michael Giacchino", "Bernard Herrmann"] }
            ];
            
            let newTracks = [...baseTracks];
            
            genres.forEach(genre => {
                for (let i = 0; i < genre.count; i++) {
                    const artist = genre.artists[Math.floor(Math.random() * genre.artists.length)];
                    const titleWords = ["Echo", "Dream", "Night", "Day", "Sun", "Moon", "Star", "Sky", "Ocean", "Mountain", 
                                       "City", "Void", "Light", "Dark", "Wave", "Rain", "Fire", "Wind", "Soul", "Heart"];
                    
                    const title = `${titleWords[Math.floor(Math.random() * titleWords.length)]} ${titleWords[Math.floor(Math.random() * titleWords.length)]}`;
                    const duration = formatTime(getRandomDuration(120, 600));
                    const cover = `https://via.placeholder.com/300/${getRandomColor()}/ffffff?text=${genre.name.toUpperCase()}`;
                    
                    newTracks.push({
                        id: newTracks.length + 1,
                        title: title,
                        artist: artist,
                        genre: genre.name,
                        duration: duration,
                        cover: cover,
                        src: getRandomAudioUrl()
                    });
                }
            });
            
            return newTracks;
        }
        
        // Popular radio stations from around the world
        const radioStations = [
            // Electronic
            { name: "DI.FM - Main Channel", genre: "electronic", url: "https://streamer.radio.co/s785d8e31f/listen", country: "US", logo: "https://di-fm-public.s3.amazonaws.com/logo.png" },
            { name: "Proton Radio", genre: "electronic", url: "http://stream.protonradio.com:8000/", country: "US", logo: "https://www.protonradio.com/images/logo.png" },
            { name: "SomaFM - Groove Salad", genre: "electronic", url: "https://ice2.somafm.com/groovesalad-128-mp3", country: "US", logo: "https://somafm.com/img/groovesalad120.png" },
            { name: "BBC Radio 1", genre: "electronic", url: "http://bbcmedia.ic.llnwd.net/stream/bbcmedia_radio1_mf_p", country: "UK", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/b/bb/BBC_Radio_1_Logo.svg/1200px-BBC_Radio_1_Logo.svg.png" },
            { name: "Ibiza Global Radio", genre: "electronic", url: "https://ibizaglobalradio.streaming-pro.com:8443/live.mp3", country: "Spain", logo: "https://www.ibizaglobalradio.com/wp-content/uploads/2020/07/logo-01-500px.png" },
            
            // Rock
            { name: "Radio X UK", genre: "rock", url: "https://media-ssl.musicradio.com/RadioXLondon", country: "UK", logo: "https://upload.wikimedia.org/wikipedia/commons/7/71/Radio_X_logo.png" },
            { name: "KROQ 106.7", genre: "rock", url: "https://streaming.live.audionow.com/streamings?stream=1kxrq-fm", country: "US", logo: "https://upload.wikimedia.org/wikipedia/en/8/86/KROQ-FM_Logo.png" },
            { name: "Rock Antenne", genre: "rock", url: "https://stream.rockantenne.de/rockantenne", country: "Germany", logo: "https://www.rockantenne.de/themes/custom/rockantenne/logo.svg" },
            { name: "Absolute Radio", genre: "rock", url: "http://network.absoluteradio.co.uk/core/audio/aacplus/live.pls", country: "UK", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Absolute_Radio_logo.svg/1200px-Absolute_Radio_logo.svg.png" },
            { name: "Q104.3 New York", genre: "rock", url: "https://playerservices.streamtheworld.com/api/livestream-redirect/WAXQFMAAC.aac", country: "US", logo: "https://upload.wikimedia.org/wikipedia/en/5/5a/Q104.3_New_York_radio_logo.png" },
            
            // Pop
            { name: "Capital FM", genre: "pop", url: "https://media-ssl.musicradio.com/CapitalLondon", country: "UK", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/90/Capital_FM_logo.svg/1200px-Capital_FM_logo.svg.png" },
            { name: "KIIS 102.7", genre: "pop", url: "https://playerservices.streamtheworld.com/api/livestream-redirect/KISSFMAAC.aac", country: "US", logo: "https://upload.wikimedia.org/wikipedia/en/c/c2/KIIS-FM_logo.svg" },
            { name: "NRJ France", genre: "pop", url: "https://scdn.nrjaudio.fm/adwz1/fr/30638/mp3_128.mp3", country: "France", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/NRJ_logo.svg/1200px-NRJ_logo.svg.png" },
            { name: "Z100 New York", genre: "pop", url: "https://playerservices.streamtheworld.com/api/livestream-redirect/WHTZFM_SC", country: "US", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/9/93/WHTZ.svg/1200px-WHTZ.svg.png" },
            { name: "Hit FM Moscow", genre: "pop", url: "https://emgregion.hostingradio.ru:8064/hitfm128.mp3", country: "Russia", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Hit_FM.svg/1200px-Hit_FM.svg.png" },
            
            // Jazz
            { name: "Jazz24", genre: "jazz", url: "https://jazz24.streamguys1.com/jazz24-128mp3", country: "US", logo: "https://jazz24.org/wp-content/uploads/2019/09/cropped-jazz24-logo-512.png" },
            { name: "Smooth Jazz Florida", genre: "jazz", url: "https://smoothjazzflorida.streamguys1.com/smoothflorida", country: "US", logo: "https://www.smoothjazzflorida.com/wp-content/uploads/2019/04/sjflogo.png" },
            { name: "Radio Swiss Jazz", genre: "jazz", url: "https://stream.srg-ssr.ch/m/rsj/aacp_96.pls", country: "Switzerland", logo: "https://www.radioswissjazz.ch/fileadmin/templates/main/images/logo.png" },
            { name: "Jazz FM UK", genre: "jazz", url: "https://jazz128ssl.streaming.broadcast.radio:1101/jazz128ssl.mp3", country: "UK", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/c/c3/Jazz_Fm_logo_2017.svg/1200px-Jazz_Fm_logo_2017.svg.png" },
            { name: "Tropical Jazz Paris", genre: "jazz", url: "https://tropicaljazz.ice.infomaniak.ch/tropicaljazz-high.mp3", country: "France", logo: "https://www.tropicaljazz.com/wp-content/uploads/2020/06/Tropical-Jazz-Logo-Official.png" },
            
            // News/Talk
            { name: "BBC World Service", genre: "news", url: "http://bbcwssc.ic.llnwd.net/stream/bbcwssc_mp1_ws-eieuk", country: "UK", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/61/BBC_World_Service_red.svg/1200px-BBC_World_Service_red.svg.png" },
            { name: "NPR News", genre: "news", url: "https://npr-ice.streamguys1.com/live.mp3", country: "US", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/NPR_logo_2019.svg/1200px-NPR_logo_2019.svg.png" },
            { name: "France Info", genre: "news", url: "https://direct.franceinfo.fr/live/franceinfo-midfi.mp3", country: "France", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/f/f7/Franceinfo.svg/1200px-Franceinfo.svg.png" },
            { name: "CNN Radio", genre: "news", url: "http://tunein.streamguys1.com/cnn2", country: "US", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/6/66/CNN_International_logo.svg/1200px-CNN_International_logo.svg.png" },
            
            // Classical
            { name: "Classic FM UK", genre: "classical", url: "https://media-ssl.musicradio.com/ClassicFM", country: "UK", logo: "https://upload.wikimedia.org/wikipedia/commons/thumb/d/df/Classic_FM_UK_logo_2015.svg/1200px-Classic_FM_UK_logo_2015.svg.png" },
            { name: "WQXR New York", genre: "classical", url: "https://stream.wqxr.org/wqxr-web", country: "US", logo: "https://media.wnyc.org/i/1400/1400/l/80/1/wqxr_logo_final_vert_blacktag.png" }
        ];
        
        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = Math.floor(seconds % 60);
            return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
        }
        
        function getRandomDuration(min, max) {
            return Math.floor(Math.random() * (max - min + 1) + min);
        }
        
        function getRandomColor() {
            const colors = ['ff00ff', '00ffff', '9d00ff', 'ff9900', '00ff00'];
            return colors[Math.floor(Math.random() * colors.length)];
        }
        
        function getRandomAudioUrl() {
            const baseUrl = 'https://www.soundhelix.com/examples/mp3/SoundHelix-Song-';
            return baseUrl + (Math.floor(Math.random() * 9) + 1) + '.mp3';
        }
        
        // Generate the playlists
        const fullPlaylist = generateMoreTracks(realTracks);
        let currentTrackIndex = 0;
        let filteredPlaylist = [];
        let currentGenre = 'all';
        let currentSearch = '';
        let isLoading = false;
        let loadedItems = 30;
        let currentRadioStation = null;
        
        // Load track
        function loadTrack(index) {
            if (filteredPlaylist.length === 0 || index < 0 || index >= filteredPlaylist.length) return;
            
            const track = filteredPlaylist[index];
            currentTrackIndex = index;
            
            // Set media elements
            audio.src = track.src;
            songTitleEl.textContent = track.title;
            artistNameEl.textContent = track.artist;
            albumArtEl.src = track.cover;
            radioStationEl.classList.add('hidden');
            
            // Reset radio if playing
            if (currentRadioStation) {
                stopRadio();
            }
            
            // Highlight current track in playlist
            const playlistItems = playlistEl.querySelectorAll('tr');
            playlistItems.forEach((item, i) => {
                if (i === index) {
                    item.classList.add('bg-purple-900', 'bg-opacity-30');
                } else {
                    item.classList.remove('bg-purple-900', 'bg-opacity-30');
                }
            });
            
            // Update duration display when metadata is loaded
            audio.onloadedmetadata = function() {
                durationEl.textContent = formatTime(audio.duration);
            };
        }
        
        // Play/pause track
        function togglePlay() {
            if (currentRadioStation) {
                if (audio.paused) {
                    playRadio(currentRadioStation);
                } else {
                    stopRadio();
                }
                return;
            }
            
            if (audio.paused) {
                audio.play()
                    .then(() => {
                        playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    })
                    .catch(error => {
                        console.error("Playback failed:", error);
                    });
            } else {
                audio.pause();
                playBtn.innerHTML = '<i class="fas fa-play"></i>';
            }
        }
        
        // Play radio station
        function playRadio(station) {
            currentRadioStation = station;
            audio.src = station.url;
            
            songTitleEl.textContent = "Radio Streaming";
            artistNameEl.textContent = "Live Broadcast";
            stationNameEl.textContent = `${station.name} (${station.country})`;
            albumArtEl.src = station.logo || 'https://via.placeholder.com/300/9d00ff/ffffff?text=RADIO';
            
            radioStationEl.classList.remove('hidden');
            
            audio.play()
                .then(() => {
                    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    document.querySelectorAll('.radio-station').forEach(el => {
                        if (el.dataset.station === station.name) {
                            el.classList.add('active');
                        } else {
                            el.classList.remove('active');
                        }
                    });
                })
                .catch(error => {
                    console.error("Radio playback failed:", error);
                });
        }
        
        // Stop radio playback
        function stopRadio() {
            audio.pause();
            playBtn.innerHTML = '<i class="fas fa-play"></i>';
            document.querySelectorAll('.radio-station').forEach(el => el.classList.remove('active'));
            currentRadioStation = null;
        }
        
        // Update progress bar
        function updateProgress() {
            if (audio.duration) {
                const progressPercent = (audio.currentTime / audio.duration) * 100;
                progressBar.value = progressPercent;
                
                // Update time display
                currentTimeEl.textContent = formatTime(audio.currentTime);
                durationEl.textContent = formatTime(audio.duration);
            } else {
                currentTimeEl.textContent = 'LIVE';
                durationEl.textContent = 'RADIO';
            }
        }
        
        // Set progress (only for tracks, not radio)
        function setProgress() {
            if (!currentRadioStation && audio.duration) {
                audio.currentTime = (progressBar.value / 100) * audio.duration;
            }
        }
        
        // Change volume
        function setVolume() {
            audio.volume = volumeControl.value;
        }
        
        // Previous track
        function prevTrack() {
            if (currentRadioStation) return;
            
            currentTrackIndex--;
            if (currentTrackIndex < 0) {
                currentTrackIndex = filteredPlaylist.length - 1;
            }
            loadTrack(currentTrackIndex);
            audio.play()
                .then(() => {
                    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                });
        }
        
        // Next track
        function nextTrack() {
            if (currentRadioStation) return;
            
            currentTrackIndex++;
            if (currentTrackIndex > filteredPlaylist.length - 1) {
                currentTrackIndex = 0;
            }
            loadTrack(currentTrackIndex);
            audio.play()
                .then(() => {
                    playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                });
        }
        
        // Filter tracks by genre and search
        function filterTracks() {
            filteredPlaylist = fullPlaylist.filter(track => {
                const matchesGenre = currentGenre === 'all' || track.genre === currentGenre;
                const matchesSearch = track.title.toLowerCase().includes(currentSearch.toLowerCase()) || 
                                     track.artist.toLowerCase().includes(currentSearch.toLowerCase());
                return matchesGenre && matchesSearch;
            });
            
            renderPlaylist();
            loadedItems = 30; // Reset loaded items when filtering
        }
        
        // Filter radio stations by genre
        function filterRadioStations() {
            const radioSearchTerm = radioSearch.value.toLowerCase();
            const filteredStations = radioStations.filter(station => {
                const matchesGenre = currentRadioGenre === 'all' || station.genre === currentRadioGenre;
                const matchesSearch = station.name.toLowerCase().includes(radioSearchTerm) || 
                                     station.country.toLowerCase().includes(radioSearchTerm);
                return matchesGenre && matchesSearch;
            });
            
            renderRadioStations(filteredStations);
        }
        
        // Render playlist
        function renderPlaylist() {
            const visibleTracks = filteredPlaylist.slice(0, loadedItems);
            
            playlistEl.innerHTML = visibleTracks.map((track, index) => `
                <tr class="hover:bg-purple-900 hover:bg-opacity-30 cursor-pointer ${index === currentTrackIndex ? 'bg-purple-900 bg-opacity-30' : ''}" 
                    data-index="${index}">
                    <td class="py-3 px-1 text-center">${track.id}</td>
                    <td class="py-3">${track.title}</td>
                    <td class="py-3">${track.artist}</td>
                    <td class="py-3"><span class="px-2 py-1 bg-${getGenreColor(track.genre)}-900 rounded-full text-xs">${track.genre}</span></td>
                    <td class="py-3 text-right pr-4">${track.duration}</td>
                </tr>
            `).join('');
            
            // Hide loading if we've shown all tracks
            if (loadedItems >= filteredPlaylist.length) {
                loadingMoreEl.classList.add('hidden');
            } else {
                loadingMoreEl.classList.remove('hidden');
            }
        }
        
        // Render radio stations
        function renderRadioStations(stations) {
            radioContainer.innerHTML = stations.map(station => `
                <div class="radio-station neon-border p-4 cursor-pointer ${currentRadioStation?.name === station.name ? 'active' : ''}" 
                     data-station="${station.name}"
                     onclick="app.playRadio(${JSON.stringify(station).replace(/"/g, '&quot;')})">
                    <div class="flex items-center gap-4">
                        <div class="w-16 h-16 rounded-full overflow-hidden">
                            <img src="${station.logo || 'https://via.placeholder.com/300/9d00ff/ffffff?text=RADIO'}" 
                                 alt="${station.name}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-grow">
                            <h4 class="font-bold truncate">${station.name}</h4>
                            <div class="flex items-center justify-between">
                                <span class="text-xs">${station.genre} • ${station.country}</span>
                                ${currentRadioStation?.name === station.name ? '<div class="equalizer"><div class="equalizer-bar"></div><div class="equalizer-bar"></div><div class="equalizer-bar"></div></div>' : ''}
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');
        }
        
        // Get color for genre tag
        function getGenreColor(genre) {
            const colors = {
                'electronic': 'purple',
                'rock': 'red',
                'hiphop': 'yellow',
                'pop': 'blue',
                'jazz': 'green',
                'classical': 'indigo',
                'metal': 'gray',
                'ambient': 'pink',
                'soundtrack': 'orange'
            };
            return colors[genre] || 'purple';
        }
        
        // Load more tracks when scrolling
        function loadMoreIfNeeded() {
            const scrollY = window.scrollY || window.pageYOffset;
            const innerHeight = window.innerHeight;
            const scrollHeight = document.documentElement.scrollHeight;
            const distanceToBottom = scrollHeight - (scrollY + innerHeight);
            
            if (distanceToBottom < 200 && !isLoading && loadedItems < filteredPlaylist.length) {
                isLoading = true;
                loadingMoreEl.classList.remove('hidden');
                
                // Simulate loading delay
                setTimeout(() => {
                    loadedItems += 20;
                    renderPlaylist();
                    isLoading = false;
                    
                    if (loadedItems >= filteredPlaylist.length) {
                        loadingMoreEl.classList.add('hidden');
                    }
                }, 500);
            }
        }
        
        // Switch between tabs
        function switchTab(tabId) {
            document.querySelectorAll('.tabs-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.tab === tabId);
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.toggle('active', content.id === `${tabId}-tab`);
            });
        }
        
        // Expose functions to global scope for inline event handlers
        window.app = {
            playRadio,
            stopRadio,
            switchTab
        };
        
        // Event listeners
        playBtn.addEventListener('click', togglePlay);
        prevBtn.addEventListener('click', prevTrack);
        nextBtn.addEventListener('click', nextTrack);
        progressBar.addEventListener('input', setProgress);
        volumeControl.addEventListener('input', setVolume);
        
        audio.addEventListener('timeupdate', updateProgress);
        audio.addEventListener('ended', nextTrack);
        
        // Click on playlist item
        playlistEl.addEventListener('click', (e) => {
            const row = e.target.closest('tr');
            if (row) {
                currentTrackIndex = parseInt(row.dataset.index);
                loadTrack(currentTrackIndex);
                audio.play()
                    .then(() => {
                        playBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    });
            }
        });
        
        // Search functionality
        searchInput.addEventListener('input', () => {
            currentSearch = searchInput.value;
            filterTracks();
        });
        
        // Radio search functionality
        radioSearch.addEventListener('input', filterRadioStations);
        
        // Genre tabs functionality
        genreButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                genreButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentGenre = btn.dataset.genre;
                filterTracks();
            });
        });
        
        // Radio genre tabs functionality
        radioGenreButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                radioGenreButtons.forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                currentRadioGenre = btn.dataset.radioGenre;
                filterRadioStations();
            });
        });
        
        // Tab navigation
        tabButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                switchTab(btn.dataset.tab);
            });
        });
        
        // Infinite scroll
        window.addEventListener('scroll', loadMoreIfNeeded);
        
        // Initialize
        currentRadioGenre = 'all';
        filterTracks();
        renderRadioStations(radioStations);
        loadTrack(0);
        
        // Background interaction
        document.addEventListener('mousemove', (e) => {
            const x = e.clientX / window.innerWidth;
            const y = e.clientY / window.innerHeight;
            
            document.body.style.backgroundImage = `
                radial-gradient(circle at ${x * 100}% ${y * 100}%, rgba(255, 0, 255, 0.1) 0%, transparent 20%),
                radial-gradient(circle at ${100 - x * 100}% ${100 - y * 100}%, rgba(0, 255, 255, 0.1) 0%, transparent 20%)
            `;
        });
    </script>
</body>
</html>
